import{S as t,i,s as e,e as n,t as r,j as s,c as l,a,b as c,d as o,l as h,o as f,f as u,g as m,h as d,n as p,H as g}from"../../chunks/index-0559b322.js";import{C as b}from"../../chunks/counter-6bdd197d.js";import{U as x}from"../../chunks/urqlClient-c6f317b9.js";import"../../chunks/index-2343ecc8.js";function j(t,i,e){const n=t.slice();return n[2]=i[e],n}function q(t){let i,e,p,g,b,x=t[2].title+"";return{c(){i=n("li"),e=n("a"),p=r(x),b=s(),this.h()},l(t){i=l(t,"LI",{});var n=a(i);e=l(n,"A",{href:!0});var r=a(e);p=c(r,x),r.forEach(o),b=h(n),n.forEach(o),this.h()},h(){f(e,"href",g="/articles/"+t[2]._id)},m(t,n){u(t,i,n),m(i,e),m(e,p),m(i,b)},p(t,i){1&i&&x!==(x=t[2].title+"")&&d(p,x),1&i&&g!==(g="/articles/"+t[2]._id)&&f(e,"href",g)},d(t){t&&o(i)}}}function _(t){let i,e,f,b,x,_,k,v,y=t[0],E=[];for(let n=0;n<y.length;n+=1)E[n]=q(j(t,y,n));return{c(){i=n("h2"),e=r("Urql"),f=r("\n\nLimit: "),b=r(t[1]),x=s(),_=n("br"),k=s(),v=n("ul");for(let t=0;t<E.length;t+=1)E[t].c()},l(n){i=l(n,"H2",{});var r=a(i);e=c(r,"Urql"),r.forEach(o),f=c(n,"\n\nLimit: "),b=c(n,t[1]),x=h(n),_=l(n,"BR",{}),k=h(n),v=l(n,"UL",{});var s=a(v);for(let t=0;t<E.length;t+=1)E[t].l(s);s.forEach(o)},m(t,n){u(t,i,n),m(i,e),u(t,f,n),u(t,b,n),u(t,x,n),u(t,_,n),u(t,k,n),u(t,v,n);for(let i=0;i<E.length;i+=1)E[i].m(v,null)},p(t,[i]){if(2&i&&d(b,t[1]),1&i){let e;for(y=t[0],e=0;e<y.length;e+=1){const n=j(t,y,e);E[e]?E[e].p(n,i):(E[e]=q(n),E[e].c(),E[e].m(v,null))}for(;e<E.length;e+=1)E[e].d(1);E.length=y.length}},i:p,o:p,d(t){t&&o(i),t&&o(f),t&&o(b),t&&o(x),t&&o(_),t&&o(k),t&&o(v),g(E,t)}}}let k;async function v({page:t,fetch:i,session:e,context:n}){const r=x(i);let s;return await b.subscribe((async t=>{k=t})),s=await r.query("\n      query ($limit: Int) {\n        articles(limit: $limit) {\n          _id\n          title\n          article_categories {\n            _id\n            name\n          }\n        }\n      }\n    ",{limit:k}).toPromise(),{props:{articles:s.data.articles,limit:k}}}function y(t,i,e){let{articles:n}=i,{limit:r}=i;return t.$$set=t=>{"articles"in t&&e(0,n=t.articles),"limit"in t&&e(1,r=t.limit)},[n,r]}export default class extends t{constructor(t){super(),i(this,t,y,_,e,{articles:0,limit:1})}}export{v as load};
